<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title> A Web Packet's Journey </title>

        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />

        <!-- <link rel="apple-touch-icon" sizes="128x128" href="#"> -->
        <!-- <link rel="icon" type="image/x-icon" href="#"> -->

        <meta name="description" content="A Web Packet's Journey is an online ( desktop, mobile, cardboard and WebVR ) educational interactive-narrative/game based on the route a web request packet takes over the Internet.">

        <!-- for Google+ -->
        <meta itemprop="name" content="A Web Packet's Journey">
        <meta itemprop="description" content="A Web Packet's Journey is an online ( desktop, mobile, cardboard and WebVR ) educational interactive-narrative/game based on the route a web request packet takes over the Internet.">
        <!-- <meta itemprop="image" content="#"> -->

        <!-- for Twitter -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@branger_briz">
        <meta name="twitter:title" content="A Web Packet's Journey">
        <meta name="twitter:description" content="A Web Packet's Journey is an online ( desktop, mobile, cardboard and WebVR ) educational interactive-narrative/game based on the route a web request packet takes over the Internet.">
        <meta name="twitter:creator" content="@branger_briz">
        <!-- Twitter summary card with large image must be at least 280x150px -->
        <!-- <meta name="twitter:image:src" content="#"> -->

        <!-- for Facebook -->
        <meta property="og:title" content="A Web Packet's Journey">
        <meta property="og:type" content="article">
        <!-- <meta property="og:url" content="#"> -->
        <!-- <meta property="og:image" content="#"> -->
        <meta property="og:description" content="A Web Packet's Journey is an online ( desktop, mobile, cardboard and WebVR ) educational interactive-narrative/game based on the route a web request packet takes over the Internet.">
        <meta property="og:site_name" content="A Web Packet's Journey">

        <link rel="stylesheet" href="css/styles.css">
    </head>
    <body class="splash-bg">

        <section id="splash">
            <div>
                <h3>Branger_Briz Presents</h3>
                <!-- <h1>A Web Packet's Journey</h1> -->
                <img src="images/title.png" alt="a-web-packets-journey" id="title">
                <div id="packet"></div>
                <div id="splash-options">
                    <button>Play Preview Beta</button>
                    <button>Support the Project</button>
                </div>
            </div>
        </section>

        <section id="project-info">
            <div class="header"></div>
            <div class="body">
                <div>
                    <h3>About</h3>
                    <div>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </div>
                    <h3>other stuff</h3>
                    <div>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </div>
                    <h3>About</h3>
                    <div>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </div>
                    <h3>other stuff</h3>
                    <div>
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </div>
                </div>
            </div>
            <div class="footer"></div>
        </section>

        <section id="behind-the-scenes">
            <div>
                <h3>About</h3>
                <div>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </div>
                <h3>other stuff</h3>
                <div>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </div>
            </div>
        </section>

        <!-- third party dependencies  -->
        <script src="libs/Tween.js"></script>
        <script src="libs/three.min.js"></script>
        <!-- globally used classes / functions  -->
        <script src="js/BaseObjClass.js"></script>
        <script src="js/utils.js"></script>
        <!-- scene specific classes / functions  -->
        <script src="js/Packet.js"></script>
        <script src="js/2dPxlClouds.js"></script>
        <script>

            /*
                welcome code explorer! we're glad you're interested to see how
                this game works :) we've done our best to make the code readable
                ( no minification or obfiscation ) and have tried to leave
                helpful comments along the way. this project is open-source so
                you can also look at all this code on our github:
                https://github.com/brangerbriz/A-Web-Packets-Journey

                if you have any thoughts/questions we'd love to hear 'em. you
                can contact us@brangerbriz.com
            */

            let width = (innerWidth<500) ? innerWidth : 500
            let height = (innerHeight<500) ? innerHeight*(320/500) : 320
            let pdiv = document.querySelector('#packet')
            pdiv.style.width = `${width}px`
            pdiv.style.height = `${height}px`

            const scene = new THREE.Scene()
            const camera = new THREE.PerspectiveCamera(75,width/height,0.1,100)
            camera.position.z = 1
            camera.position.y = 0.5

            const renderer = new THREE.WebGLRenderer({
                alpha:true, antialias:true
            })
            renderer.setSize( width, height )
            pdiv.appendChild( renderer.domElement )

            let packet = new Packet({
                bounce:true,
                lights:false,
                type:'dns'
            },(mesh)=>{
                scene.add(mesh)
            })

            function packetLook(x,y){
                if(packet.mesh){
                    let trn = Math.PI/3
                    let hlfW = innerWidth/2
                    let hlfH = innerHeight/2
                    let xOff = x - hlfW
                    let yOff = y - hlfH
                    packet.mesh.rotation.y = Math.map(xOff,-hlfW,hlfW,-trn,trn)
                    packet.mesh.rotation.x = Math.map(yOff,-hlfH,hlfH,-trn,trn)
                }
            }

            document.addEventListener('mousemove',(e)=>{
                if(packet.mesh){
                    let trn = Math.PI/3
                    let hlfW = innerWidth/2
                    let hlfH = innerHeight/2
                    let xOff = e.clientX - hlfW
                    let yOff = e.pageY - hlfH
                    packet.mesh.rotation.y = Math.map(xOff,-hlfW,hlfW,-trn,trn)
                    packet.mesh.rotation.x = Math.map(yOff,-hlfH,hlfH,-trn,trn)
                }
            })

            document.addEventListener("touchstart", (e)=>{
                if(!packet.spinning){
                    packet.spinning = true
                    let x = -Math.PI*2
                    new TWEEN.Tween(packet.mesh.rotation).to({x:x}, 1000)
                    .easing(TWEEN.Easing.Quadratic.InOut)
                    .onComplete(()=>{
                        packet.spinning = false
                        packet.mesh.rotation.x = 0
                    }).start()
                }
            })

            //


            let clouds = new PxlClouds('#project-info > .body')
            let pxlHeader = new PxlFade('#project-info > .header','up')
            let pxlFooter = new PxlFade('#project-info > .footer','down')

            // ----------------------

            window.addEventListener('resize',()=>{
                width = (innerWidth<500) ? innerWidth : 500
                height = (innerHeight<320) ? innerHeight : 320
                camera.aspect = width/height
                camera.updateProjectionMatrix()
                renderer.setSize(width, height)
                pdiv.style.width = `${width}px`
                pdiv.style.height = `${height}px`
                //
                clouds.resize()
                pxlHeader.draw()
                pxlFooter.draw()
            })

            function animate(){
                requestAnimationFrame( animate )
                TWEEN.update()
                renderer.render( scene, camera )
                clouds.update()
            }

            animate()



        </script>
    </body>
</html>
